/* Dashboard */
.dashboard{margin-bottom:16px}
.card-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
@media (max-width: 1100px){.card-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width: 640px){.card-grid{grid-template-columns:1fr}}

.metric-card{background:#ffffff;border-radius:14px;padding:16px;border:1px solid #e9ecf6;box-shadow:0 8px 28px rgba(14,33,77,.06)}
.metric-title{font-size:12px;text-transform:uppercase;letter-spacing:.06em;color:#5c6175;margin-bottom:6px}
.metric-value{font-size:28px;font-weight:700;color:#0f1222}
.metric-sub{color:#777d92;font-size:12px;margin-top:4px}
.trend.up{color:#2e7d32}
.trend.down{color:#c62828}
.badge-soft{background:#eef1ff;border:1px solid #dfe5ff;color:#3d5afe;border-radius:999px;padding:2px 8px}

.chart-card{background:#ffffff;border-radius:14px;padding:16px;border:1px solid #e9ecf6;box-shadow:0 8px 28px rgba(14,33,77,.06);margin-top:14px}
.chart-header{margin-bottom:6px}

/* Light theme base */
body[data-theme='light']{--bg:#f6f7fb;--panel:#ffffff;--muted:#5c6175;--text:#0f1222;--primary:#3d5afe;--primary-2:#6c7dff}

/* Sleek app layout */
:root{--bg:#0f1222;--panel:#171a2b;--muted:#8b90a8;--text:#f2f4ff;--primary:#6c7dff;--primary-2:#8b9bff;--success:#23c983;--error:#ff6b6b;--info:#ffd166}

html,body{height:100%}
body{margin:0;background:linear-gradient(180deg,#0f1222 0%,#161932 100%);color:var(--text);-webkit-font-smoothing:antialiased;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto}

.app-container{max-width:980px;margin:0 auto;padding:18px}

.app-header{background:var(--panel);border-radius:16px;padding:14px 18px;margin-bottom:16px;border:1px solid rgba(255,255,255,.06)}
.brand-logo{font-size:28px}
.app-title{font-weight:700;font-size:20px}

.upload-card{background:var(--panel);border-radius:14px;padding:14px 16px;margin-bottom:14px;border:1px solid rgba(255,255,255,.06)}

.status-badge{padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid rgba(255,255,255,.08)}
.status-badge.success{background:rgba(35,201,131,.15);color:#8af0c6;border-color:rgba(35,201,131,.35)}
.status-badge.error{background:rgba(255,107,107,.12);color:#ffb0b0;border-color:rgba(255,107,107,.3)}
.status-badge.info{background:rgba(255,209,102,.15);color:#ffe3a3;border-color:rgba(255,209,102,.35)}

.chat-history{background:var(--panel);border-radius:16px;min-height:340px;max-height:60vh;overflow-y:auto;padding:16px;border:1px solid rgba(255,255,255,.06)}

.message-row{display:grid;grid-template-columns:40px 1fr auto;gap:12px;align-items:flex-start;margin-bottom:14px}
.message-row.user .bubble{background:linear-gradient(135deg,var(--primary) 0%,var(--primary-2) 100%);color:#fff}
.message-row.user .avatar{background:#2a2f4b}
.message-row.bot .bubble{background:#1b2038;color:var(--text)}
.message-row .avatar{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:#1f2340;border:1px solid rgba(255,255,255,.08)}

.bubble{position:relative;border-radius:14px;padding:12px 14px;border:1px solid rgba(255,255,255,.06);box-shadow:0 8px 24px rgba(0,0,0,.25)}
.bubble p{margin:0 0 8px 0}
.bubble :last-child{margin-bottom:0}

.tools{display:flex;gap:8px}
.copy-btn,.tools .btn{position:absolute;top:8px;right:8px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.15);color:var(--text);padding:4px 8px;border-radius:8px;font-size:12px}
.copy-btn:hover,.tools .btn:hover{background:rgba(255,255,255,.12)}

/* Markdown styling */
.bubble h1,.bubble h2,.bubble h3{margin:10px 0 6px;font-weight:700}
.bubble ul{padding-left:18px}
.bubble code{background:rgba(255,255,255,.08);border-radius:6px;padding:2px 6px}

/* Code blocks */
pre{position:relative;background:#0d1117 !important;border-radius:12px;border:1px solid rgba(255,255,255,.06);padding:14px;overflow:auto}
.code-wrap .copy-btn{position:absolute;top:8px;right:8px}

/* Composer */
.composer{margin-top:14px}
.input-group .input-group-text{background:#202649;border:1px solid rgba(255,255,255,.08);color:var(--muted)}
.input-group .form-control{background:#12152a;border:1px solid rgba(255,255,255,.08);color:var(--text)}
.input-group .form-control:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem rgba(108,125,255,.25)}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--primary-2));border:none}
.btn-primary:disabled{opacity:.6}

/* Typing indicator */
.typing{display:flex;align-items:center;gap:6px;color:var(--muted);margin-top:8px}
.dot{width:8px;height:8px;border-radius:50%;background:var(--muted);animation:blink 1.4s infinite ease-in-out}
.dot:nth-child(1){animation-delay:0ms}.dot:nth-child(2){animation-delay:160ms}.dot:nth-child(3){animation-delay:320ms}
@keyframes blink{0%,80%,100%{opacity:.3}40%{opacity:1}}

/* Scrollbar */
.chat-history::-webkit-scrollbar{height:12px;width:10px}
.chat-history::-webkit-scrollbar-thumb{background:rgba(255,255,255,.15);border-radius:10px}
.chat-history::-webkit-scrollbar-track{background:transparent}

/* Theme support */
body[data-theme='light']{--bg:#f6f7fb;--panel:#ffffff;--muted:#5c6175;--text:#0f1222;--primary:#3d5afe;--primary-2:#6c7dff}
body[data-theme='light'] .chat-history{border-color:#e9ecf6}
body[data-theme='light'] .message-row.bot .bubble{background:#f6f7fb;color:#0f1222}
body[data-theme='light'] .input-group .form-control{background:#ffffff;color:#0f1222}
body[data-theme='light'] .input-group .input-group-text{background:#f2f3f9;color:#5c6175}

/* Dropzone */
.dropzone{transition: all .2s ease}
.dropzone.dragging{outline:2px dashed var(--primary); outline-offset:6px; background:rgba(108,125,255,.06)}

/* Toasts */
.toast-host{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:8px;z-index:9999}
.toast-item{opacity:0;transform:translateY(8px);transition:.25s ease;padding:10px 14px;border-radius:10px;background:var(--panel);border:1px solid rgba(255,255,255,.12);color:var(--text);box-shadow:0 10px 30px rgba(0,0,0,.25)}
.toast-item.show{opacity:1;transform:translateY(0)}
.toast-item.success{border-color:rgba(35,201,131,.4)}
.toast-item.error{border-color:rgba(255,107,107,.35)}

/* Scroll-to-bottom FAB */
.scroll-fab{position:fixed;right:22px;bottom:88px;width:40px;height:40px;border-radius:50%;border:1px solid rgba(255,255,255,.12);background:var(--panel);color:var(--text);display:flex;align-items:center;justify-content:center;box-shadow:0 10px 30px rgba(0,0,0,.28);opacity:0;pointer-events:none;transition:.2s}
.scroll-fab.show{opacity:1;pointer-events:auto}
